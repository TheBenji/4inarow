(function(e){var t=function(){S=false;a()},n=function(e){if(confirm(e)){t();o(d)}},r=function(t){return e.getElementById(t)},i=function(e){return r(e).innerHTML},s=function(e,t){return r("c-"+e+"-"+t)},o=function(e){for(var t=1;t<7;t++){for(var n=1;n<8;n++){e(t,n)}}},u=function(e,t){return v(e,t,g[y])},a=function(){r("c").innerHTML=g[y]},f=function(e,t){for(var n=t-1;n>0;n--)if(!u(e,n))break;for(var r=t+1;r<8;r++)if(!u(e,r))break;return r-n>4},l=function(e,t){for(var n=e+1;n<7;n++)if(!u(n,t))break;return n-e>3},c=function(e,t){for(var n=e-1,r=t-1;n>0;n--,r--)if(r<1||!u(n,r))break;for(var i=e+1,r=t+1;i<7;i++,r++)if(r>7||!u(i,r))break;return i-n>4},h=function(e,t){for(var n=e-1,r=t+1;n>0;n--,r++)if(r>7||!u(n,r))break;for(var i=e+1,r=t-1;i<7;i++,r--)if(r<1||!u(i,r))break;return i-n>4},p=function(e,t,n){s(e,t).className=n},d=function(e,t){p(e,t,"")},v=function(e,t,n){return s(e,t).className==n},m=function(e,t){s(e,t).onclick=function(e){return function(){if(!S&&y===b){for(var t=6;t>0;t--){if(v(t,e,"")){x.emit("turn",{x:t,y:e});if(f(t,e)||l(t,e)||c(t,e)||h(t,e)){x.emit("won")}break}}}}}(t)},g=[i("a"),i("b")],y=0,b=0,w=i("n"),E=i("w"),S=true,x=io.connect("http://"+window.location.hostname);x.on("connected",function(e){x.emit("player",{myId:-1,enemyId:-1})});x.on("started",function(e){S=false;b=e;r("msg").innerHTML="You are the "+g[b]+" player";r("turn").style.display="block"});x.on("winner",function(e){S=true;alert(g[e]+" player won!")});x.on("newTurn",function(e){y=e;a()});x.on("turn",function(e){p(e.x,e.y,g[y])});t();o(m);r("r").onclick=function(){n(w)}})(document)