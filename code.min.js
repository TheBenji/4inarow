(function(a){var b,c=function(){b=!1,j()},d=function(a){confirm(a)&&(c(),h(p))},e=function(b){return a.getElementById(b)},f=function(a){return e(a).innerHTML},g=function(a,b){return e("c-"+a+"-"+b)},h=function(a){for(var b=1;7>b;b++)for(var c=1;8>c;c++)a(b,c)},i=function(a,b){return q(a,b,s[t])},j=function(){e("c").innerHTML=s[t=(t+1)%2]},k=function(a,b){for(var c=b-1;c>0&&i(a,c);c--);for(var d=b+1;8>d&&i(a,d);d++);return d-c>4},l=function(a,b){for(var c=a+1;7>c&&i(c,b);c++);return c-a>3},m=function(a,b){for(var c=a-1,d=b-1;c>0&&!(1>d)&&i(c,d);c--,d--);for(var e=a+1,d=b+1;7>e&&!(d>7)&&i(e,d);e++,d++);return e-c>4},n=function(a,b){for(var c=a-1,d=b+1;c>0&&!(d>7)&&i(c,d);c--,d++);for(var e=a+1,d=b-1;7>e&&!(1>d)&&i(e,d);e++,d--);return e-c>4},o=function(a,b,c){g(a,b).className=c},p=function(a,b){o(a,b,"")},q=function(a,b,c){return g(a,b).className==c},r=function(a,c){g(a,c).onclick=function(a){return function(){if(!b)for(var c=6;c>0;c--)if(q(c,a,"")){o(c,a,s[t]),k(c,a)||l(c,a)||m(c,a)||n(c,a)?(b=!0,d(v.replace("%s",s[t]))):j();break}}}(c)},s=[f("a"),f("b")],t=0,u=f("n"),v=f("w");c(),h(r),e("r").onclick=function(){d(u)}})(document);